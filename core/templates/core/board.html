<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>
        {% if settings and settings.board_title %}{{ settings.board_title }}{% else %}Ø´Ø±ÙƒØ§Ø¤Ù†Ø§ ÙÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…{% endif %}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --neon-color: {{ settings.neon_color|default:"#00f2ff" }};
            --neon-pink: #ff00ff;
            --cards-speed: {{ settings.cards_speed|default:40 }}s;
        }

        * { box-sizing: border-box; font-family: 'Tajawal', sans-serif; }

        body {
            margin: 0;
            min-height: 100vh;
            background: #090a0f radial-gradient(circle at center, #1b2735 0%, #090a0f 100%);
            position: relative;
            overflow-x: hidden;
            color: white;
        }

        /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„ØµØºÙŠØ±Ø© */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 150px 150px, #fff, rgba(0,0,0,0));
            background-size: 200px 200px;
            opacity: 0.4;
            z-index: 0;
        }

        /* ===== Header (Ø´Ø¹Ø§Ø±Ø§Øª ÙŠÙ…ÙŠÙ† ÙˆÙŠØ³Ø§Ø±) ===== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            z-index: 10;
            position: relative;
        }

        .header .side-right { order: 1; text-align: right; } /* Ø§Ù„ÙˆØ²Ø§Ø±Ø© ÙŠÙ…ÙŠÙ† */
        .header .side-left { order: 3; text-align: left; }   /* Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙŠØ³Ø§Ø± */
        .header .title { order: 2; flex: 1; font-size: clamp(20px, 4vw, 35px); font-weight: 800; text-align: center; }

        .header img { height: clamp(60px, 10vw, 110px); width: auto; filter: drop-shadow(0 0 10px rgba(255,255,255,0.3)); }

        .sub-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
            padding: 15px;
            font-size: 16px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            position: relative; z-index: 5;
        }

        /* ===== Cards Layout (Ø¨Ø§Ù„Ø·ÙˆÙ„ Ù…Ø¹ Ù†ÙŠÙˆÙ†) ===== */
        .cards-wrapper { margin-top: 50px; width: 100%; overflow: hidden; padding-bottom: 120px; z-index: 2; position: relative; }
        
        .cards-track { 
            display: flex; gap: 40px; width: max-content; 
            animation: moveCards var(--cards-speed) linear infinite; 
        }

        /* Ù…ÙŠØ²Ø© Ø§Ù„Ù†Ù‚Ø± Ù„Ù„Ø¥ÙŠÙ‚Ø§Ù */
        .cards-track:active, .cards-track.paused { animation-play-state: paused; }

        @keyframes moveCards {
            from { transform: translateX(100%); }
            to { transform: translateX(-100%); }
        }

        .card {
            position: relative;
            width: 280px; /* Ù…Ù‚Ø§Ø³ Ø·ÙˆÙ„ÙŠ */
            min-height: 400px;
            padding: 40px 25px 25px;
            background: rgba(15, 15, 25, 0.8);
            border-radius: 20px;
            border: 2px solid var(--neon-color);
            box-shadow: 0 0 15px var(--neon-color), inset 0 0 10px var(--neon-color);
            text-align: center;
            transition: transform 0.3s;
        }

        /* ØªÙ†ÙˆÙŠØ¹ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù†ÙŠÙˆÙ† Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card:nth-child(even) { border-color: var(--neon-pink); box-shadow: 0 0 15px var(--neon-pink); }

        /* Ù‚Ù„Ø¨ Ø§Ù„Ø­Ø¨ - ØªØµÙ…ÙŠÙ… Ù†ÙŠÙˆÙ† Ø¯Ø§Ø¦Ø±ÙŠ */
        .card-icon {
            position: absolute;
            top: -20px; right: 20px;
            width: 50px; height: 50px;
            background: #090a0f;
            border: 2px solid inherit;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px;
            box-shadow: 0 0 10px white;
            z-index: 3;
        }

        .student-name {
            font-size: 14px;
            color: var(--neon-color);
            border: 1px solid var(--neon-color);
            padding: 4px 12px;
            border-radius: 15px;
            margin-bottom: 15px;
            display: inline-block;
        }

        .card h4 { margin: 10px 0; font-size: 22px; font-weight: 800; color: #fff; }
        .card p { font-size: 16px; line-height: 1.8; color: #ddd; }

        /* ===== Add Button & Modal ===== */
        .add-btn {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: #fff; color: #1b2735; padding: 15px 40px;
            border-radius: 50px; font-weight: 800; border: none; cursor: pointer;
            z-index: 100; box-shadow: 0 0 20px rgba(255,255,255,0.5);
        }

        #modal-content {
            background: rgba(15, 20, 30, 0.95);
            width: 90%; max-width: 450px;
            margin: 10% auto; padding: 40px;
            border-radius: 30px; border: 1px solid var(--neon-color);
            box-shadow: 0 0 30px var(--neon-color);
        }

        .form-input {
            width: 100%; background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 12px; border-radius: 10px; color: white; margin-bottom: 15px;
        }
    </style>
</head>

<body>

<div class="header">
    <div class="side-right">
        {% if settings and settings.ministry_logo %}<img src="{{ settings.ministry_logo.url }}">{% endif %}
        <div style="margin-top:5px">ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©</div>
    </div>

    <div class="title">Ù…ÙØ¹Ù‹Ø§ Ù†ØµÙ†Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ…... Ø´Ø±ÙƒØ§Ø¡ ÙÙŠ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</div>

    <div class="side-left">
        {% if settings and settings.school_logo %}<img src="{{ settings.school_logo.url }}">{% endif %}
        <div style="margin-top:5px">Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø«Ø§Ù„Ø«Ø© Ø¹Ø´Ø± Ø¨Ø¹Ø±Ø¹Ø±</div>
    </div>
</div>

<div class="sub-bar">
    <div>Ø±Ø§Ø¦Ø¯Ø© Ø§Ù„Ù†Ø´Ø§Ø·: <strong>Ø¢Ù…Ù†Ù‡ Ù…Ø§Ù„Ø­ Ø§Ù„Ø¹Ù†Ø²ÙŠ</strong></div>
    <div>Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: <strong>Ù…ØºÙŠØ¶Ù‡ Ø³Ù„ÙŠÙ…Ø§Ù† Ø§Ù„Ø´Ù…Ø±ÙŠ</strong></div>
</div>

<div class="cards-wrapper">
    <div class="cards-track" id="track" onclick="this.classList.toggle('paused')">
        {% for msg in parent_messages %}
            <div class="card">
                <div class="card-icon" style="border-color: inherit;">â¤ï¸</div>
                <h4>{{ msg.parent_name }}</h4>
                <div class="student-name">Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø¨Ù†Ø©: {{ msg.student_name }}</div>
                <p>{{ msg.message }}</p>
            </div>
        {% empty %}
            <div class="card">
                <div class="card-icon">âœ¨</div>
                <h4>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„</h4>
                <p>Ø´Ø§Ø±ÙƒÙˆÙ†Ø§ Ø¨ÙƒÙ„Ù…Ø§ØªÙƒÙ… Ø§Ù„Ø·ÙŠØ¨Ø© Ù„ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ ğŸŒ·</p>
            </div>
        {% endfor %}
    </div>
</div>

<button class="add-btn" onclick="openModal()">ï¼‹ Ø£Ø¶Ù Ø±Ø³Ø§Ù„Ø© ÙØ®Ø± Ù„Ø§Ø¨Ù†ØªÙƒ</button>

<div id="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:1000; backdrop-filter:blur(10px);">
    <div id="modal-content">
        <h2 style="text-align:center; color:var(--neon-color); margin-bottom:25px;">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ÙØ®Ø±</h2>
        <form method="post">
            {% csrf_token %}
            <input type="text" name="parent_name" class="form-input" placeholder="Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±" required>
            <input type="text" name="student_name" class="form-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©" required>
            <textarea name="message" class="form-input" rows="4" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„ØªØ­ÙÙŠØ²ÙŠØ© Ù‡Ù†Ø§..." required></textarea>
            
            <button type="submit" class="add-btn" style="position:static; width:100%; transform:none; background:var(--neon-color); color:#000;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¢Ù†</button>
            <button type="button" onclick="closeModal()" style="display:block; width:100%; margin-top:15px; background:none; border:none; color:#ff4d4d; cursor:pointer;">Ø¥Ù„ØºØ§Ø¡</button>
        </form>
    </div>
</div>

<script>
    function openModal() {
        document.getElementById("modal").style.display = "block";
        document.body.style.overflow = "hidden";
    }
    function closeModal() {
        document.getElementById("modal").style.display = "none";
        document.body.style.overflow = "auto";
    }
</script>

</body>
</html>
